<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="style.css" />
    <link rel="apple-touch-icon" href="icon.png">
    <title>Etch-a-Sketch</title>
  </head>
  <body>
    <div id="container">
  <div id="buttonContainer">
    <button id="etchButton">Etch-a-Sketch</button>
    <button id="snakeButton">Snake</button>
    <button id="clearButton">Clear</button>
  </div>
  <div id="grid"></div>
</div>


    <script>
      let isMouseDown = false;
      let isTouchDown = false;
      let currentMode = null; // "etch" or "snake"


      // Track touch state
      document.addEventListener("touchstart", () => isTouchDown = true);
      document.addEventListener("touchend", () => isTouchDown = false);
      document.addEventListener("mousedown", () => isMouseDown = true);
      document.addEventListener("mouseup", () => isMouseDown = false);

      const snakeButton = document.getElementById("snakeButton");
      const etch = document.getElementById("etch");
    
      // Snake Game Functionality
      function snakeGame() {
        currentMode = "snake"; // set mode
        const grid = document.getElementById("grid");
        grid.innerHTML = ""; // clear existing grid
        grid.style.gridTemplateColumns = `repeat(${16}, 1fr)`;
        grid.style.gridTemplateRows = `repeat(${16}, 1fr)`;
        for (let i = 0; i < 256; i++) {
          const cell = document.createElement("div");
          cell.classList.add("gridcell");
          grid.appendChild(cell);
          cell.addEventListener("mouseover", () => {
            cell.style.backgroundColor = `hsl(${
              Math.random() * 360
            }, 100%, 50%)`;
            setTimeout(() => {
              cell.style.backgroundColor = "";
            }, 1000);
          });
          // optional: touch support for snake
        cell.addEventListener("touchstart", () => {
          cell.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
          setTimeout(() => {
            cell.style.backgroundColor = "";
          }, 1000);
    });
        }
      }

      snakeButton.addEventListener("click", () => {
        snakeGame();
      });
      // Etch-a-Sketch Functionality
      // Create default grid
      function promptForGridSize() {
        let size = parseInt(prompt("Enter grid size (1â€“64):"), 10);
        if (isNaN(size) || size < 1 || size > 64) {
          alert("Please enter a number between 1 and 64.");
          return;
        }
        createGrid(size);
      }
      //etch-a-sketch grid creation
      function createGrid(size) {
  currentMode = "etch"; // set mode
  grid.innerHTML = ""; 
  grid.style.gridTemplateColumns = `repeat(${size}, 1fr)`;
  grid.style.gridTemplateRows = `repeat(${size}, 1fr)`;

  for (let i = 0; i < size * size; i++) {
    const cell = document.createElement("div");
    cell.classList.add("gridcell");

    // Mouse events
    cell.addEventListener("mouseover", () => {
      if (isMouseDown && currentMode === "etch") cell.style.backgroundColor = "black";
    });
    cell.addEventListener("mousedown", () => {
      if (currentMode === "etch") cell.style.backgroundColor = "black";
    });

    // Touch events
    cell.addEventListener("touchstart", () => {
      if (currentMode === "etch") cell.style.backgroundColor = "black";
    });
    cell.addEventListener("touchmove", (e) => {
      if (currentMode !== "etch") return; // ignore for snake
      e.preventDefault();
      const touch = e.touches[0];
      const target = document.elementFromPoint(touch.clientX, touch.clientY);
      if (target && target.classList.contains("gridcell")) {
        target.style.backgroundColor = "black";
      }
    });

    grid.appendChild(cell);
  }
}
        etchButton.addEventListener("click", () => {
        promptForGridSize();
      });
        // Clear button functionality
      const clearButton = document.getElementById("clearButton");
        clearButton.addEventListener("click", () => {
        const cells = document.querySelectorAll(".gridcell");
        cells.forEach(cell => {
        cell.style.backgroundColor = "";
    });
});

    </script>
  </body>
</html>
